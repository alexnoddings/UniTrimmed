<html>
<head>
    <title>%protocolname%</title>
    <script src="../src/svg.js" type="text/javascript"></script>
    <script src="../src/Agent.js" type="text/javascript"></script>
    <script src="../src/Fact.js" type="text/javascript"></script>
    <script src="../src/NetStack.js" type="text/javascript"></script>
    <script src="../src/Command.js" type="text/javascript"></script>
    <script src="../src/ProtocolGame.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../style.css">
</head>

<body onload="commands.retrieve_cmds();">
    <div id='intro'>
        <h2>Protocol Game: %protocolname%</h2>
        <h3>Interactive game</h3>
        <h5>Protocol definition:</h5>
        %protodef%
        <div class='game'>
            <div class='inlined' id='box1' style="height:570px">
                <div class='agents' id='agents_box1'></div>
                <div class='networkbar' id='bar'></div>
                <div class='adversary' id='adversary_box1'></div>
                <div class='network'>
                    <center>Network stack</center>
                    <ul id='message_list1'>
                    </ul>
                </div>
            </div>
            <div id='console'>
                <div id='command'>
                    <h2>Commands</h2>
                    <textarea rows='11' type='text' id='commandbox' onkeydown="if (event.ctrlKey && event.keyCode == 13) document.getElementById('execute_cmds_button').click()"></textarea>
                    <br />
                    <button id='execute_cmds_button' onclick="commands.store_cmds_and_reload(document.getElementById('commandbox').value);">
                        Execute commands (Ctrl + Enter)
                    </button>
                    <button id='add_msg_button' onclick="localStorage.clear(); location.reload();">
                        Clear all
                    </button>
                </div>
                <div id='console_log'>
                    <p id='log' class='err'>
                </div>
            </div>
        </div>
        <script>
%code%
        </script>
    </div>
    <svg>
        <defs>
            <marker id="markerCircle" markerWidth="8" markerHeight="8" refX="5" refY="5">
                <circle cx="5" cy="5" r="3" style="stroke: none; fill:blue;" />
            </marker>

            <marker id="markerArrow" markerWidth="13" markerHeight="8" refX="2" refY="5"
                    orient="auto">
                <path d="M2,2 L2,8 L10,5 L2,2" style="fill: blue;" />
            </marker>
            <marker id="markerBackArrow" markerWidth="13" markerHeight="13" refX="2" refY="5"
                    orient="auto">
                <path d="M8,2 L8,8 L0,5 L8,2" style="fill: blue;" />
            </marker>
            <marker id="triangle" viewBox="0 0 10 10" refX="0" refY="5"
                    markerUnits="strokeWidth" markerWidth="10"
                    markerHeight="8" orient="auto">
                <path d="M 0 0 L 10 5 L 0 10 z"></path>
            </marker>
        </defs>
    </svg>
</body>
